<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰‡èŠ±YTå°é¢è£½ä½œå·¥å…· - GagaOOLala</title>

    <!-- Adobe Fonts (Typekit) Advanced Embed Code -->
    <script>
        (function (d) {
            var config = {
                kitId: 'joc2vce',
                scriptTimeout: 3000,
                async: true
            },
                h = d.documentElement, t = setTimeout(function () { h.className = h.className.replace(/\bwf-loading\b/g, "") + " wf-inactive"; }, config.scriptTimeout), tk = d.createElement("script"), f = false, s = d.getElementsByTagName("script")[0], a; h.className += " wf-loading"; tk.src = 'https://use.typekit.net/' + config.kitId + '.js'; tk.async = true; tk.onload = tk.onreadystatechange = function () { a = this.readyState; if (f || a && a != "complete" && a != "loaded") return; f = true; clearTimeout(t); try { Typekit.load(config) } catch (e) { } }; s.parentNode.insertBefore(tk, s)
        })(document);
    </script>

    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script src="js/vendor/tailwindcss.js"></script>
    <script src="js/vendor/face-api.min.js"></script>

    <link rel="stylesheet" href="css/highlight.css">
</head>

<body class="bg-gray-950 text-gray-100 h-screen w-screen overflow-hidden flex flex-col relative">

    <div id="toastContainer" class="fixed top-0 left-1/2 z-50 pointer-events-none"></div>

    <!-- Header -->
    <header
        class="bg-gray-900 border-b border-gray-800 p-4 flex-none z-20 shadow-lg h-16 flex items-center justify-between relative">
        <div class="flex items-center gap-4">
            <h1 class="text-xl font-bold flex items-center gap-2 text-blue-400">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                ç‰‡èŠ±YTå°é¢è£½ä½œå·¥å…· V2.1
            </h1>
        </div>

        <div id="modeIndicator"
            class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 hidden md:flex text-xs font-mono bg-gray-800 rounded-full px-3 py-1 items-center gap-2 border border-gray-700">
            <span id="step1-badge" class="text-blue-400 font-bold">Step 1: æˆªå–</span>
            <span class="text-gray-600">â†’</span>
            <span id="step2-badge" class="text-gray-500">Step 2: è£½ä½œ</span>
        </div>

        <div id="fileUploadContainer">
            <label for="videoInput"
                class="cursor-pointer bg-blue-600 hover:bg-blue-500 text-white px-5 py-1.5 rounded-full transition flex items-center gap-2 shadow-lg hover:shadow-blue-500/30 text-sm font-medium">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                </svg>
                <span>é¸æ“‡å½±ç‰‡</span>
            </label>
            <input type="file" id="videoInput" accept="video/*" class="hidden">
        </div>

        <button id="backToCaptureBtn" onclick="switchMode('capture')"
            class="hidden bg-gray-700 hover:bg-gray-600 text-white px-5 py-1.5 rounded-full transition flex items-center gap-2 border border-gray-600">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
            <span>è¿”å›æˆªåœ–æ¨¡å¼</span>
        </button>
    </header>

    <!-- Main Content -->
    <main class="flex-1 w-full max-w-[1920px] mx-auto p-4 lg:p-6 flex gap-6 min-h-0 overflow-hidden relative">

        <!-- PANEL 1: Video & Controls -->
        <div id="videoPanel" class="w-full lg:w-7/12 h-full flex flex-col gap-4 overflow-hidden panel-transition">
            <div
                class="flex-1 min-h-0 bg-black rounded-xl overflow-hidden shadow-2xl border border-gray-800 relative group ring-1 ring-white/10 flex flex-col justify-center">
                <video id="mainVideo" class="w-full h-full object-contain" controls crossorigin="anonymous"></video>
                <div id="dropMessage"
                    class="absolute inset-0 flex flex-col items-center justify-center text-gray-500 pointer-events-none bg-gray-900/90 backdrop-blur-sm transition-opacity z-10">
                    <div class="bg-gray-800 p-6 rounded-2xl border border-gray-700 shadow-xl text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mb-4 opacity-50 text-blue-400 mx-auto"
                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                        </svg>
                        <p class="text-lg font-medium text-gray-200">æ‹–æ›³å½±ç‰‡è‡³æ­¤</p>
                    </div>
                </div>
            </div>

            <div class="flex-none bg-gray-800 rounded-xl border border-gray-700 p-5 shadow-lg">
                <div class="flex justify-between items-center mb-4 border-b border-gray-700/50 pb-2">
                    <h2 class="text-sm font-bold text-gray-300 uppercase tracking-wider flex items-center gap-2">
                        <span class="w-2 h-2 bg-blue-500 rounded-full"></span> æˆªåœ–è¨­å®š
                    </h2>
                    <span id="videoDuration"
                        class="font-mono text-xs text-blue-300 bg-blue-900/30 px-2 py-0.5 rounded border border-blue-800/50">00:00:00</span>
                </div>

                <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                    <div class="lg:col-span-1">
                        <label class="text-[10px] font-semibold text-gray-500 uppercase block mb-1">é–‹å§‹æ™‚é–“</label>
                        <div class="flex">
                            <input type="text" id="startTime" value="00:00:00"
                                class="w-full bg-gray-900 border border-gray-600 rounded-l px-2 py-1.5 text-center font-mono text-sm text-white focus:outline-none focus:border-blue-500">
                            <button onclick="setCurrentTime('start')"
                                class="bg-gray-700 hover:bg-gray-600 px-2 rounded-r border-y border-r border-gray-600"
                                title="è¨­ç‚ºç•¶å‰">ğŸ“</button>
                        </div>
                    </div>
                    <div class="lg:col-span-1">
                        <label class="text-[10px] font-semibold text-gray-500 uppercase block mb-1">çµæŸæ™‚é–“</label>
                        <div class="flex">
                            <input type="text" id="endTime" value="00:00:10"
                                class="w-full bg-gray-900 border border-gray-600 rounded-l px-2 py-1.5 text-center font-mono text-sm text-white focus:outline-none focus:border-blue-500">
                            <button onclick="setCurrentTime('end')"
                                class="bg-gray-700 hover:bg-gray-600 px-2 rounded-r border-y border-r border-gray-600"
                                title="è¨­ç‚ºç•¶å‰">ğŸ“</button>
                        </div>
                    </div>
                    <div class="lg:col-span-2">
                        <label class="text-[10px] font-semibold text-gray-500 uppercase block mb-1">é–“éš”: <span
                                id="intervalDisplay" class="text-blue-400">5.0</span> ç§’</label>
                        <input type="range" id="intervalRange" min="0.5" max="60" step="0.5" value="5"
                            class="w-full h-1.5 bg-gray-900 rounded-lg appearance-none cursor-pointer accent-blue-500 mt-2">
                        <input type="number" id="intervalTime" value="5" class="hidden">
                    </div>
                </div>

                <div class="mb-4 bg-gray-900/50 p-3 rounded-lg border border-gray-700/50 flex flex-col gap-2">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2">
                            <input type="checkbox" id="aiToggle"
                                class="w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-600 focus:ring-2">
                            <label for="aiToggle"
                                class="text-xs font-medium text-gray-300 cursor-pointer select-none flex items-center gap-1"><span>ğŸ¤–</span>
                                å•Ÿç”¨ AI äººè‡‰éæ¿¾</label>
                        </div>
                        <span id="modelStatus" class="text-[10px] text-gray-500">ç­‰å¾…å•Ÿç”¨</span>
                    </div>
                    <div class="flex items-center gap-2 mt-1 pl-6">
                        <span class="text-[10px] text-gray-400">æ¨¡å¼:</span>
                        <select id="modelSelect"
                            class="bg-gray-800 text-white text-xs border border-gray-600 rounded px-2 py-1 focus:outline-none focus:border-blue-500">
                            <option value="ssd">é«˜ç²¾æº–æ¨¡å¼ (SSD)</option>
                            <option value="tiny">æ¥µé€Ÿæ¨¡å¼ (Tiny)</option>
                        </select>
                    </div>
                </div>

                <div class="flex gap-3">
                    <button id="btnManualCapture"
                        class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-2 rounded-lg font-medium text-sm transition shadow-lg shadow-indigo-900/20 flex justify-center items-center gap-2">å–®å¼µæˆªåœ–</button>
                    <button id="btnAutoCapture"
                        class="flex-1 bg-emerald-600 hover:bg-emerald-500 text-white py-2 rounded-lg font-medium text-sm transition shadow-lg shadow-emerald-900/20 flex justify-center items-center gap-2">åŸ·è¡Œå€é–“æˆªåœ–</button>
                </div>
            </div>
        </div>

        <!-- PANEL 2: Gallery -->
        <div id="galleryPanel"
            class="w-full lg:w-5/12 h-full flex flex-col bg-gray-800 rounded-xl border border-gray-700 shadow-2xl overflow-hidden panel-transition transition-all duration-500">
            <div class="p-4 border-b border-gray-700 flex justify-between items-center bg-gray-800 flex-none z-10">
                <div class="flex items-center gap-2">
                    <span class="font-bold text-gray-200">æˆªåœ–ç•«å»Š</span>
                    <span class="text-xs font-mono bg-gray-700 text-gray-300 px-2 py-0.5 rounded-full"
                        id="countDisplay">0</span>
                </div>
                <button id="btnClear" onclick="clearGallery()"
                    class="text-xs text-red-400 hover:text-red-300 px-3 py-1 rounded hover:bg-red-400/10 transition border border-transparent">æ¸…ç©º</button>
            </div>
            <div id="galleryContainer" class="flex-1 min-h-0 overflow-y-auto custom-scroll p-[15px] bg-gray-900/30">
                <div id="gallery" class="gallery-grid-layout w-full">
                    <div id="emptyState"
                        class="col-span-full flex flex-col items-center justify-center text-gray-600 h-64 border-2 border-dashed border-gray-800 rounded-xl">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mb-2 opacity-50" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <p class="text-sm">å°šæœªæœ‰æˆªåœ–</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- PANEL 3: Editor (Dual View) - Fixed Scrolling -->
        <div id="editorPanel"
            class="w-full lg:w-8/12 h-full hidden flex-col bg-gray-800 rounded-xl border border-gray-700 shadow-2xl overflow-hidden panel-transition">

            <div id="editorInnerContent" class="w-full h-full flex flex-col relative">

                <div class="p-4 border-b border-gray-700 flex justify-between items-center bg-gray-800 flex-none z-10">
                    <h3 class="text-lg font-bold text-white flex items-center gap-2"><span>ğŸ¨</span> é›™èªå°é¢è£½ä½œå™¨</h3>
                    <div class="flex gap-3">
                        <button onclick="resetImageTransform()"
                            class="text-xs text-gray-400 hover:text-white px-3 py-1 rounded bg-gray-700 hover:bg-gray-600 transition flex items-center gap-1">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                            é‡ç½®ä½ç½®
                        </button>
                        <button onclick="downloadAll()"
                            class="bg-green-600 hover:bg-green-500 text-white px-4 py-1.5 rounded-lg text-sm font-bold shadow-lg transition flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                            </svg>
                            ä¸‹è¼‰å…¨éƒ¨ (ä¸­+è‹±)
                        </button>
                    </div>
                </div>

                <!-- Editor Body: Scrollable on mobile, Fixed on Desktop -->
                <div class="flex-1 flex flex-col lg:flex-row overflow-y-auto lg:overflow-hidden min-h-0">
                    <!-- Canvas Area (Split View) -->
                    <div
                        class="flex-none lg:flex-1 bg-black/80 canvas-bg p-6 flex flex-col items-center justify-start lg:overflow-y-auto custom-scroll gap-6 min-h-[500px]">
                        <div class="w-full max-w-[800px] flex flex-col gap-2 flex-none">
                            <span class="text-xs text-gray-400 font-bold ml-1 flex items-center justify-between">
                                ä¸­æ–‡ç‰ˆé è¦½
                                <span class="text-[10px] text-gray-500 font-normal">ğŸ–±ï¸ æ‹–æ›³å¯ç§»å‹• / æ»¾è¼ªå¯ç¸®æ”¾</span>
                            </span>
                            <canvas id="canvasChi"
                                class="w-full shadow-2xl border border-gray-600 rounded-sm grab-cursor"></canvas>
                        </div>
                        <div class="w-full max-w-[800px] flex flex-col gap-2 flex-none">
                            <span class="text-xs text-gray-400 font-bold ml-1">è‹±æ–‡ç‰ˆé è¦½</span>
                            <canvas id="canvasEn"
                                class="w-full shadow-2xl border border-gray-600 rounded-sm grab-cursor"></canvas>
                        </div>
                    </div>

                    <!-- Editor Controls (Sidebar) -->
                    <div
                        class="w-full lg:w-80 bg-gray-800 p-5 lg:overflow-y-auto border-l border-gray-700 space-y-6 custom-scroll flex-none">

                        <div>
                            <label class="block text-xs font-bold text-gray-400 uppercase mb-2">åŠ‡åè¨­å®š (æ‰‹å‹•æ›è¡Œ)</label>
                            <div class="space-y-3">
                                <div>
                                    <div class="text-xs text-blue-400 mb-1">ä¸­æ–‡åŠ‡å (å¯¬åº¦: 648px)</div>
                                    <textarea id="titleChi" placeholder="è¼¸å…¥ä¸­æ–‡åŠ‡å...&#10;å¯æŒ‰ Enter æ›è¡Œ" rows="3"
                                        class="w-full bg-gray-900 border border-gray-600 rounded px-3 py-2 text-white text-sm focus:border-blue-500 focus:outline-none font-bold"
                                        style="font-family: 'source-han-sans-cjk-tc', sans-serif;"></textarea>
                                </div>
                                <div>
                                    <div class="text-xs text-blue-400 mb-1">è‹±æ–‡åŠ‡å (å¯¬åº¦: 648px)</div>
                                    <textarea id="titleEn" placeholder="Input English Title...&#10;Press Enter to wrap"
                                        rows="3"
                                        class="w-full bg-gray-900 border border-gray-600 rounded px-3 py-2 text-white text-sm focus:border-blue-500 focus:outline-none font-medium"
                                        style="font-family: 'normalidad-compact', sans-serif;"></textarea>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label class="block text-xs font-bold text-gray-400 uppercase mb-2">é›†æ•¸èˆ‡æ¨™ç±¤
                                (Episode/Tag)</label>

                            <div class="flex items-center mb-3">
                                <input type="checkbox" id="isSpinoff"
                                    class="w-4 h-4 text-purple-600 bg-gray-900 border-gray-600 rounded focus:ring-purple-600">
                                <label for="isSpinoff"
                                    class="ml-2 text-sm text-gray-300 cursor-pointer font-bold text-purple-400">ç•ªå¤–ç¯‡
                                    (Spin-off)</label>
                            </div>

                            <div class="flex gap-2 items-center" id="epInputGroup">
                                <span class="text-sm text-gray-400 font-bold">EP</span>
                                <input type="text" id="editEp" placeholder="01"
                                    class="w-24 bg-gray-900 border border-gray-600 rounded px-3 py-2 text-white text-sm text-center font-bold focus:border-blue-500 focus:outline-none">
                            </div>
                        </div>

                        <div>
                            <label class="block text-xs font-bold text-gray-400 uppercase mb-2">ç‰ˆæ¬Šå®£å‘Š (Copyright)</label>
                            <input type="text" id="editCopyright" placeholder="ä¾‹å¦‚ï¼šÂ©Film Partners"
                                class="w-full bg-gray-900 border border-gray-600 rounded px-3 py-2 text-white text-sm focus:border-blue-500 focus:outline-none">
                        </div>

                        <div class="p-3 bg-gray-700/30 rounded border border-gray-700 text-xs text-gray-400 space-y-2">
                            <p>ğŸ’¡ <b>æç¤ºï¼š</b></p>
                            <ul class="list-disc list-inside pl-1 space-y-1 opacity-80">
                                <li>å¯ç›´æ¥åœ¨ç•«å¸ƒä¸Šæ‹–æ›³ç§»å‹•åœ–ç‰‡</li>
                                <li>æ»¾å‹•æ»‘é¼ æ»¾è¼ªå¯ç¸®æ”¾</li>
                                <li>ç³»çµ±æœƒè‡ªå‹•æ¨¡ç³Šå¡«å……èƒŒæ™¯</li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div> <!-- End of editorInnerContent -->
        </div>

    </main>

    <!-- Footer: Updated small size -->
    <footer class="bg-gray-900 border-t border-gray-800 p-1 flex-none z-20">
        <div class="footer flex flex-col items-center justify-center gap-0">
            <img src="https://img.gagaoolala.com/assets/v2.1.1/img/ui/logo.png" alt="GagaOOLala Logo" width="80"
                height="17" class="opacity-50">
            <div>GagaOOLala è¨­è¨ˆéƒ¨é–‹ç™¼</div>
        </div>
    </footer>

    <canvas id="canvas" class="hidden"></canvas>

    <script src="js/highlight.js"></script>
</body>

</html>